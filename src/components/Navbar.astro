---
// Determine current path for active link highlighting
const { pathname } = Astro.url;
import { Image } from "astro:assets";
import logo from "../assets/salt white.png";

interface NavLink {
  href: string;
  label: string;
  match: (path: string) => boolean;
}

const links: NavLink[] = [
  { href: "/", label: "home", match: (p) => p === "/" },
  { href: "/about", label: "about", match: (p) => p.startsWith("/about") },
  {
    href: "/links",
    label: "links",
    match: (p) => p.startsWith("/links") || p.startsWith("/go"),
  },
  {
    href: "/portfolio",
    label: "portfolio",
    match: (p) => p.startsWith("/portfolio"),
  },
  {
    href: "/blog",
    label: "blog",
    match: (p) => p.startsWith("/blog"),
  },
];
---

<nav class="navbar" aria-label="Primary">
  <div class="navbar__inner">
    <a class="navbar__brand" href="/" aria-label="Home">
      <Image src={logo} width={20} height={20} alt="salt logo" />
      <span class="navbar__label">salt</span>
    </a>
    <button
      class="navbar__toggle"
      aria-expanded="false"
      aria-label="Toggle navigation"
      id="navToggle"
    >
      <span class="navbar__toggle-bar" aria-hidden="true"></span>
      <span class="navbar__toggle-bar" aria-hidden="true"></span>
      <span class="navbar__toggle-bar" aria-hidden="true"></span>
    </button>
    <div class="navbar__menu-wrapper" id="navbar-menu">
      <ul class="navbar__menu" role="list">
        {
          links.map((l) => {
            const active = l.match(pathname);
            return (
              <li>
                <a
                  class={["navbar__link", active && "is-active"]
                    .filter(Boolean)
                    .join(" ")}
                  href={l.href}
                  aria-current={active ? "page" : undefined}
                >
                  {l.label}
                </a>
              </li>
            );
          })
        }
      </ul>
    </div>
  </div>
</nav>
